#!/bin/bash

echo -e "\033[35mPreparazione installazione...\n\033[0m"
echo -e "\033[35m\033[01mInstallazione dipendenze!!\n\033[0m"
echo -e "\e[35m
 ██▓ ███▄    █   ██████ ▄▄▄█████▓ ▄▄▄       ██▓     ██▓    
▓██▒ ██ ▀█   █ ▒██    ▒ ▓  ██▒ ▓▒▒████▄    ▓██▒    ▓██▒    
▒██▒▓██  ▀█ ██▒░ ▓██▄   ▒ ▓██░ ▒░▒██  ▀█▄  ▒██░    ▒██░    
░██░▓██▒  ▐▌██▒  ▒   ██▒░ ▓██▓ ░ ░██▄▄▄▄██ ▒██░    ▒██░    
░██░▒██░   ▓██░▒██████▒▒  ▒██▒ ░  ▓█   ▓██▒░██████▒░██████▒
░▓  ░ ▒░   ▒ ▒ ▒ ▒▓▒ ▒ ░  ▒ ░░    ▒▒   ▓▒█░░ ▒░▓  ░░ ▒░▓  ░
 ▒ ░░ ░░   ░ ▒░░ ░▒  ░ ░    ░      ▒   ▒▒ ░░ ░ ▒  ░░ ░ ▒  ░
 ▒ ░   ░   ░ ░ ░  ░  ░    ░        ░   ▒     ░ ░     ░ ░   
 ░           ░       ░                 ░  ░    ░  ░    ░  ░
                                                           
  ▄████  ██▓▄▄▄█████▓                                      
 ██▒ ▀█▒▓██▒▓  ██▒ ▓▒                                      
▒██░▄▄▄░▒██▒▒ ▓██░ ▒░                                      
░▓█  ██▓░██░░ ▓██▓ ░                                       
░▒▓███▀▒░██░  ▒██▒ ░                                       
 ░▒   ▒ ░▓    ▒ ░░                                         
  ░   ░  ▒ ░    ░                                          
░ ░   ░  ▒ ░  ░                                            
      ░  ░  \n\e[0m"
pkg update -y && pkg upgrade -y
pkg install x11-repo -y
pkg install tur-repo -y
if command -v git >/dev/null 2>&1; then
    echo -e "\033[35mGit era già installato precedentemente.\033[0m"
else
    if pkg install git -y; then
        echo -e "\033[35m\033[01mGit è stato installato correttamente.\n\033[0m"
    else
        echo -e "\033[35mErrore nell'installazione di Git. Controlla la connessione.\033[0m"
        exit 1
    fi
fi

echo -e "\e[35m
 ██▓ ███▄    █   ██████ ▄▄▄█████▓ ▄▄▄       ██▓     ██▓    
▓██▒ ██ ▀█   █ ▒██    ▒ ▓  ██▒ ▓▒▒████▄    ▓██▒    ▓██▒    
▒██▒▓██  ▀█ ██▒░ ▓██▄   ▒ ▓██░ ▒░▒██  ▀█▄  ▒██░    ▒██░    
░██░▓██▒  ▐▌██▒  ▒   ██▒░ ▓██▓ ░ ░██▄▄▄▄██ ▒██░    ▒██░    
░██░▒██░   ▓██░▒██████▒▒  ▒██▒ ░  ▓█   ▓██▒░██████▒░██████▒
░▓  ░ ▒░   ▒ ▒ ▒ ▒▓▒ ▒ ░  ▒ ░░    ▒▒   ▓▒█░░ ▒░▓  ░░ ▒░▓  ░
 ▒ ░░ ░░   ░ ▒░░ ░▒  ░ ░    ░      ▒   ▒▒ ░░ ░ ▒  ░░ ░ ▒  ░
 ▒ ░   ░   ░ ░ ░  ░  ░    ░        ░   ▒     ░ ░     ░ ░   
 ░           ░       ░                 ░  ░    ░  ░    ░  ░
                                                           
 ███▄    █  ▒█████  ▓█████▄ ▓█████ ▄▄▄██▀▀▀██████          
 ██ ▀█   █ ▒██▒  ██▒▒██▀ ██▌▓█   ▀   ▒██ ▒██    ▒          
▓██  ▀█ ██▒▒██░  ██▒░██   █▌▒███     ░██ ░ ▓██▄            
▓██▒  ▐▌██▒▒██   ██░░▓█▄   ▌▒▓█  ▄▓██▄██▓  ▒   ██▒         
▒██░   ▓██░░ ████▓▒░░▒████▓ ░▒████▒▓███▒ ▒██████▒▒         
░ ▒░   ▒ ▒ ░ ▒░▒░▒░  ▒▒▓  ▒ ░░ ▒░ ░▒▓▒▒░ ▒ ▒▓▒ ▒ ░         
░ ░░   ░ ▒░  ░ ▒ ▒░  ░ ▒  ▒  ░ ░  ░▒ ░▒░ ░ ░▒  ░ ░         
   ░   ░ ░ ░ ░ ░ ▒   ░ ░  ░    ░   ░ ░ ░ ░  ░  ░           
         ░     ░ ░     ░       ░  ░░   ░       ░           
                     ░ \n\e[0m"
if command -v node >/dev/null 2>&1; then
    echo -e "\033[35mNodejs era già installato precedentemente.\033[0m"
else
    if pkg install nodejs -y; then
        echo -e "\033[35m\033[01mNode.js è stato installato correttamente.\n\033[0m"
    else
        echo -e "\033[35mErrore nell'installazione di Node.js. Controlla la connessione.\033[0m"
        exit 1
    fi
fi

echo -e "\e[35m
 ██▓ ███▄    █   ██████ ▄▄▄█████▓ ▄▄▄       ██▓     ██▓    
▓██▒ ██ ▀█   █ ▒██    ▒ ▓  ██▒ ▓▒▒████▄    ▓██▒    ▓██▒    
▒██▒▓██  ▀█ ██▒░ ▓██▄   ▒ ▓██░ ▒░▒██  ▀█▄  ▒██░    ▒██░    
░██░▓██▒  ▐▌██▒  ▒   ██▒░ ▓██▓ ░ ░██▄▄▄▄██ ▒██░    ▒██░    
░██░▒██░   ▓██░▒██████▒▒  ▒██▒ ░  ▓█   ▓██▒░██████▒░██████▒
░▓  ░ ▒░   ▒ ▒ ▒ ▒▓▒ ▒ ░  ▒ ░░    ▒▒   ▓▒█░░ ▒░▓  ░░ ▒░▓  ░
 ▒ ░░ ░░   ░ ▒░░ ░▒  ░ ░    ░      ▒   ▒▒ ░░ ░ ▒  ░░ ░ ▒  ░
 ▒ ░   ░   ░ ░ ░  ░  ░    ░        ░   ▒     ░ ░     ░ ░   
 ░           ░       ░                 ░  ░    ░  ░    ░  ░
                                                           
  █████▒ █████▒███▄ ▄███▓ ██▓███  ▓█████   ▄████           
▓██   ▒▓██   ▒▓██▒▀█▀ ██▒▓██░  ██▒▓█   ▀  ██▒ ▀█▒          
▒████ ░▒████ ░▓██    ▓██░▓██░ ██▓▒▒███   ▒██░▄▄▄░          
░▓█▒  ░░▓█▒  ░▒██    ▒██ ▒██▄█▓▒ ▒▒▓█  ▄ ░▓█  ██▓          
░▒█░   ░▒█░   ▒██▒   ░██▒▒██▒ ░  ░░▒████▒░▒▓███▀▒          
 ▒ ░    ▒ ░   ░ ▒░   ░  ░▒▓▒░ ░  ░░░ ▒░ ░ ░▒   ▒           
 ░      ░     ░  ░      ░░▒ ░      ░ ░  ░  ░   ░           
 ░ ░    ░ ░   ░      ░   ░░          ░   ░ ░   ░           
                     ░               ░  ░      ░ \n\e[0m"
if command -v ffmpeg >/dev/null 2>&1; then
    echo -e "\033[35mFfmpeg era già installato precedentemente.\033[0m"
else
    if pkg install ffmpeg -y; then
        echo -e "\033[35m\033[01mFFmpeg è stato installato correttamente.\n\033[0m"
    else
        echo -e "\033[35mErrore nell'installazione di FFmpeg.\033[0m"
        exit 1
    fi
fi
echo -e "\e[35m
 ██▓ ███▄    █   ██████ ▄▄▄█████▓ ▄▄▄       ██▓     ██▓                                  
▓██▒ ██ ▀█   █ ▒██    ▒ ▓  ██▒ ▓▒▒████▄    ▓██▒    ▓██▒                                  
▒██▒▓██  ▀█ ██▒░ ▓██▄   ▒ ▓██░ ▒░▒██  ▀█▄  ▒██░    ▒██░                                  
░██░▓██▒  ▐▌██▒  ▒   ██▒░ ▓██▓ ░ ░██▄▄▄▄██ ▒██░    ▒██░                                  
░██░▒██░   ▓██░▒██████▒▒  ▒██▒ ░  ▓█   ▓██▒░██████▒░██████▒                              
░▓  ░ ▒░   ▒ ▒ ▒ ▒▓▒ ▒ ░  ▒ ░░    ▒▒   ▓▒█░░ ▒░▓  ░░ ▒░▓  ░                              
 ▒ ░░ ░░   ░ ▒░░ ░▒  ░ ░    ░      ▒   ▒▒ ░░ ░ ▒  ░░ ░ ▒  ░                              
 ▒ ░   ░   ░ ░ ░  ░  ░    ░        ░   ▒     ░ ░     ░ ░                                 
 ░           ░       ░                 ░  ░    ░  ░    ░  ░                              
                                                                                         
 ██▓ ███▄ ▄███▓ ▄▄▄        ▄████ ▓█████  ███▄ ▄███▓ ▄▄▄        ▄████  ██▓ ▄████▄   ██ ▄█▀
▓██▒▓██▒▀█▀ ██▒▒████▄     ██▒ ▀█▒▓█   ▀ ▓██▒▀█▀ ██▒▒████▄     ██▒ ▀█▒▓██▒▒██▀ ▀█   ██▄█▒ 
▒██▒▓██    ▓██░▒██  ▀█▄  ▒██░▄▄▄░▒███   ▓██    ▓██░▒██  ▀█▄  ▒██░▄▄▄░▒██▒▒▓█    ▄ ▓███▄░ 
░██░▒██    ▒██ ░██▄▄▄▄██ ░▓█  ██▓▒▓█  ▄ ▒██    ▒██ ░██▄▄▄▄██ ░▓█  ██▓░██░▒▓▓▄ ▄██▒▓██ █▄ 
░██░▒██▒   ░██▒ ▓█   ▓██▒░▒▓███▀▒░▒████▒▒██▒   ░██▒ ▓█   ▓██▒░▒▓███▀▒░██░▒ ▓███▀ ░▒██▒ █▄
░▓  ░ ▒░   ░  ░ ▒▒   ▓▒█░ ░▒   ▒ ░░ ▒░ ░░ ▒░   ░  ░ ▒▒   ▓▒█░ ░▒   ▒ ░▓  ░ ░▒ ▒  ░▒ ▒▒ ▓▒
 ▒ ░░  ░      ░  ▒   ▒▒ ░  ░   ░  ░ ░  ░░  ░      ░  ▒   ▒▒ ░  ░   ░  ▒ ░  ░  ▒   ░ ░▒ ▒░
 ▒ ░░      ░     ░   ▒   ░ ░   ░    ░   ░      ░     ░   ▒   ░ ░   ░  ▒ ░░        ░ ░░ ░ 
 ░         ░         ░  ░      ░    ░  ░       ░         ░  ░      ░  ░  ░ ░      ░  ░   
                                                                         ░               \n\e[0m"
if command -v convert >/dev/null 2>&1; then
    echo -e "\033[35mImagemagick era già installato precedentemente.\033[0m"
else
    if pkg install imagemagick -y; then
        echo -e "\033[35m\033[01mImageMagick è stato installato correttamente.\n\033[0m"
    else
        echo -e "\033[35mErrore nell'installazione di ImageMagick.\033[0m"
        exit 1
    fi
fi

echo -e "\e[35m
 ██▓ ███▄    █   ██████ ▄▄▄█████▓ ▄▄▄       ██▓     ██▓    
▓██▒ ██ ▀█   █ ▒██    ▒ ▓  ██▒ ▓▒▒████▄    ▓██▒    ▓██▒    
▒██▒▓██  ▀█ ██▒░ ▓██▄   ▒ ▓██░ ▒░▒██  ▀█▄  ▒██░    ▒██░    
░██░▓██▒  ▐▌██▒  ▒   ██▒░ ▓██▓ ░ ░██▄▄▄▄██ ▒██░    ▒██░    
░██░▒██░   ▓██░▒██████▒▒  ▒██▒ ░  ▓█   ▓██▒░██████▒░██████▒
░▓  ░ ▒░   ▒ ▒ ▒ ▒▓▒ ▒ ░  ▒ ░░    ▒▒   ▓▒█░░ ▒░▓  ░░ ▒░▓  ░
 ▒ ░░ ░░   ░ ▒░░ ░▒  ░ ░    ░      ▒   ▒▒ ░░ ░ ▒  ░░ ░ ▒  ░
 ▒ ░   ░   ░ ░ ░  ░  ░    ░        ░   ▒     ░ ░     ░ ░   
 ░           ░       ░                 ░  ░    ░  ░    ░  ░
                                                           
▓██   ██▓ ▄▄▄       ██▀███   ███▄    █                     
 ▒██  ██▒▒████▄    ▓██ ▒ ██▒ ██ ▀█   █                     
  ▒██ ██░▒██  ▀█▄  ▓██ ░▄█ ▒▓██  ▀█ ██▒                    
  ░ ▐██▓░░██▄▄▄▄██ ▒██▀▀█▄  ▓██▒  ▐▌██▒                    
  ░ ██▒▓░ ▓█   ▓██▒░██▓ ▒██▒▒██░   ▓██░                    
   ██▒▒▒  ▒▒   ▓▒█░░ ▒▓ ░▒▓░░ ▒░   ▒ ▒                     
 ▓██ ░▒░   ▒   ▒▒ ░  ░▒ ░ ▒░░ ░░   ░ ▒░                    
 ▒ ▒ ░░    ░   ▒     ░░   ░    ░   ░ ░                     
 ░ ░           ░  ░   ░              ░                     
 ░ ░ \n\e[0m"
if command -v yarn >/dev/null 2>&1; then
    echo -e "\033[35mYarn era già installato precedentemente.\033[0m"
else
    if npm install -g yarn; then
        echo -e "\033[35m\033[01mYarn è stato installato correttamente.\n\033[0m"
    else
        echo -e "\033[35mErrore nell'installazione di Yarn.\033[0m"
        exit 1
    fi
fi

echo -e "\e[35m
 █    ██  ██▓  ▄▄▄█████▓ ██▓ ███▄ ▄███▓▓█████                                    
 ██  ▓██▒▓██▒  ▓  ██▒ ▓▒▓██▒▓██▒▀█▀ ██▒▓█   ▀                                    
▓██  ▒██░▒██░  ▒ ▓██░ ▒░▒██▒▓██    ▓██░▒███                                      
▓▓█  ░██░▒██░  ░ ▓██▓ ░ ░██░▒██    ▒██ ▒▓█  ▄                                    
▒▒█████▓ ░██████▒▒██▒ ░ ░██░▒██▒   ░██▒░▒████▒                                   
░▒▓▒ ▒ ▒ ░ ▒░▓  ░▒ ░░   ░▓  ░ ▒░   ░  ░░░ ▒░ ░                                   
░░▒░ ░ ░ ░ ░ ▒  ░  ░     ▒ ░░  ░      ░ ░ ░  ░                                   
 ░░░ ░ ░   ░ ░   ░       ▒ ░░      ░      ░                                      
   ░         ░  ░        ░         ░      ░  ░                                   
                                                                                 
▓█████▄  ██▓ ██▓███  ▓█████  ███▄    █ ▓█████▄ ▓█████  ███▄    █ ▒███████▒▓█████ 
▒██▀ ██▌▓██▒▓██░  ██▒▓█   ▀  ██ ▀█   █ ▒██▀ ██▌▓█   ▀  ██ ▀█   █ ▒ ▒ ▒ ▄▀░▓█   ▀ 
░██   █▌▒██▒▓██░ ██▓▒▒███   ▓██  ▀█ ██▒░██   █▌▒███   ▓██  ▀█ ██▒░ ▒ ▄▀▒░ ▒███   
░▓█▄   ▌░██░▒██▄█▓▒ ▒▒▓█  ▄ ▓██▒  ▐▌██▒░▓█▄   ▌▒▓█  ▄ ▓██▒  ▐▌██▒  ▄▀▒   ░▒▓█  ▄ 
░▒████▓ ░██░▒██▒ ░  ░░▒████▒▒██░   ▓██░░▒████▓ ░▒████▒▒██░   ▓██░▒███████▒░▒████▒
 ▒▒▓  ▒ ░▓  ▒▓▒░ ░  ░░░ ▒░ ░░ ▒░   ▒ ▒  ▒▒▓  ▒ ░░ ▒░ ░░ ▒░   ▒ ▒ ░▒▒ ▓░▒░▒░░ ▒░ ░
 ░ ▒  ▒  ▒ ░░▒ ░      ░ ░  ░░ ░░   ░ ▒░ ░ ▒  ▒  ░ ░  ░░ ░░   ░ ▒░░░▒ ▒ ░ ▒ ░ ░  ░
 ░ ░  ░  ▒ ░░░          ░      ░   ░ ░  ░ ░  ░    ░      ░   ░ ░ ░ ░ ░ ░ ░   ░   
   ░     ░              ░  ░         ░    ░       ░  ░         ░   ░ ░       ░  ░
 ░                                      ░                        ░               \n\e[0m"
pkg install libcairo pango libjpeg-turbo libpng giflib libpixman pkg-config freetype fontconfig xorgproto build-essential python libvips sqlite clang make chromium -y
pip install setuptools
export GYP_DEFINES="android_ndk_path=''"

echo -e "\e[35m
  ██████  ▄████▄   ▄▄▄       ██▀███   ██▓ ▄████▄   ▄▄▄     ▄▄▄█████▓ ▒█████  
▒██    ▒ ▒██▀ ▀█  ▒████▄    ▓██ ▒ ██▒▓██▒▒██▀ ▀█  ▒████▄   ▓  ██▒ ▓▒▒██▒  ██▒
░ ▓██▄   ▒▓█    ▄ ▒██  ▀█▄  ▓██ ░▄█ ▒▒██▒▒▓█    ▄ ▒██  ▀█▄ ▒ ▓██░ ▒░▒██░  ██▒
  ▒   ██▒▒▓▓▄ ▄██▒░██▄▄▄▄██ ▒██▀▀█▄  ░██░▒▓▓▄ ▄██▒░██▄▄▄▄██░ ▓██▓ ░ ▒██   ██░
▒██████▒▒▒ ▓███▀ ░ ▓█   ▓██▒░██▓ ▒██▒░██░▒ ▓███▀ ░ ▓█   ▓██▒ ▒██▒ ░ ░ ████▓▒░
▒ ▒▓▒ ▒ ░░ ░▒ ▒  ░ ▒▒   ▓▒█░░ ▒▓ ░▒▓░░▓  ░ ░▒ ▒  ░ ▒▒   ▓▒█░ ▒ ░░   ░ ▒░▒░▒░ 
░ ░▒  ░ ░  ░  ▒     ▒   ▒▒ ░  ░▒ ░ ▒░ ▒ ░  ░  ▒     ▒   ▒▒ ░   ░      ░ ▒ ▒░ 
░  ░  ░  ░          ░   ▒     ░░   ░  ▒ ░░          ░   ▒    ░      ░ ░ ░ ▒  
      ░  ░ ░            ░  ░   ░      ░  ░ ░            ░  ░            ░ ░  
         ░                               ░                                   
▄▄▄█████▓ █    ██ ▄▄▄█████▓▄▄▄█████▓ ▒█████   ▐██▌                           
▓  ██▒ ▓▒ ██  ▓██▒▓  ██▒ ▓▒▓  ██▒ ▓▒▒██▒  ██▒ ▐██▌                           
▒ ▓██░ ▒░▓██  ▒██░▒ ▓██░ ▒░▒ ▓██░ ▒░▒██░  ██▒ ▐██▌                           
░ ▓██▓ ░ ▓▓█  ░██░░ ▓██▓ ░ ░ ▓██▓ ░ ▒██   ██░ ▓██▒                           
  ▒██▒ ░ ▒▒█████▓   ▒██▒ ░   ▒██▒ ░ ░ ████▓▒░ ▒▄▄                            
  ▒ ░░   ░▒▓▒ ▒ ▒   ▒ ░░     ▒ ░░   ░ ▒░▒░▒░  ░▀▀▒                           
    ░    ░░▒░ ░ ░     ░        ░      ░ ▒ ▒░  ░  ░                           
  ░       ░░░ ░ ░   ░        ░      ░ ░ ░ ▒      ░                           
            ░                           ░ ░   ░ \n\e[0m"
echo -e "\033[35m\033[01mTutte le dipendenze sono state installate correttamente.\n\033[0m"

echo -e "\e[35m
 ██▓ ███▄    █   ██████ ▄▄▄█████▓ ▄▄▄       ██▓     ██▓    ▄▄▄       ███▄    █ ▓█████▄  ▒█████  
▓██▒ ██ ▀█   █ ▒██    ▒ ▓  ██▒ ▓▒▒████▄    ▓██▒    ▓██▒   ▒████▄     ██ ▀█   █ ▒██▀ ██▌▒██▒  ██▒
▒██▒▓██  ▀█ ██▒░ ▓██▄   ▒ ▓██░ ▒░▒██  ▀█▄  ▒██░    ▒██░   ▒██  ▀█▄  ▓██  ▀█ ██▒░██   █▌▒██░  ██▒
░██░▓██▒  ▐▌██▒  ▒   ██▒░ ▓██▓ ░ ░██▄▄▄▄██ ▒██░    ▒██░   ░██▄▄▄▄██ ▓██▒  ▐▌██▒░▓█▄   ▌▒██   ██░
░██░▒██░   ▓██░▒██████▒▒  ▒██▒ ░  ▓█   ▓██▒░██████▒░██████▒▓█   ▓██▒▒██░   ▓██░░▒████▓ ░ ████▓▒░
░▓  ░ ▒░   ▒ ▒ ▒ ▒▓▒ ▒ ░  ▒ ░░    ▒▒   ▓▒█░░ ▒░▓  ░░ ▒░▓  ░▒▒   ▓▒█░░ ▒░   ▒ ▒  ▒▒▓  ▒ ░ ▒░▒░▒░ 
 ▒ ░░ ░░   ░ ▒░░ ░▒  ░ ░    ░      ▒   ▒▒ ░░ ░ ▒  ░░ ░ ▒  ░ ▒   ▒▒ ░░ ░░   ░ ▒░ ░ ▒  ▒   ░ ▒ ▒░ 
 ▒ ░   ░   ░ ░ ░  ░  ░    ░        ░   ▒     ░ ░     ░ ░    ░   ▒      ░   ░ ░  ░ ░  ░ ░ ░ ░ ▒  
 ░           ░       ░                 ░  ░    ░  ░    ░  ░     ░  ░         ░    ░        ░ ░  
                                                                                ░               
 ██▒   █▓ ▄▄▄       ██▀███  ▓█████  ▄▄▄▄    ▒█████  ▄▄▄█████▓                                   
▓██░   █▒▒████▄    ▓██ ▒ ██▒▓█   ▀ ▓█████▄ ▒██▒  ██▒▓  ██▒ ▓▒                                   
 ▓██  █▒░▒██  ▀█▄  ▓██ ░▄█ ▒▒███   ▒██▒ ▄██▒██░  ██▒▒ ▓██░ ▒░                                   
  ▒██ █░░░██▄▄▄▄██ ▒██▀▀█▄  ▒▓█  ▄ ▒██░█▀  ▒██   ██░░ ▓██▓ ░                                    
   ▒▀█░   ▓█   ▓██▒░██▓ ▒██▒░▒████▒░▓█  ▀█▓░ ████▓▒░  ▒██▒ ░                                    
   ░ ▐░   ▒▒   ▓▒█░░ ▒▓ ░▒▓░░░ ▒░ ░░▒▓███▀▒░ ▒░▒░▒░   ▒ ░░                                      
   ░ ░░    ▒   ▒▒ ░  ░▒ ░ ▒░ ░ ░  ░▒░▒   ░   ░ ▒ ▒░     ░                                       
     ░░    ░   ▒     ░░   ░    ░    ░    ░ ░ ░ ░ ▒    ░                                         
      ░        ░  ░   ░        ░  ░ ░          ░ ░                                              
     ░                                   ░ \n\e[0m"

echo -e "\033[1;35m"
# MODIFICATO QUI: Spostato in $HOME perché /sdcard non supporta i symlink necessari per compilare canvas
cd $HOME || { echo "Impossibile accedere alla home"; exit 1; }
if [ -d "varebot" ]; then
    echo "La cartella varebot esiste già."
else
    git clone https://github.com/realvare/varebot.git
    echo -e "\033[35m\033[01mLa clonazione è stata scaricata e installata correttamente.\n\033[0m"
fi

echo -e "\033[35m\033[01mPassaggio alla directory del repository\n\033[0m"
cd varebot || { echo "Cartella varebot non trovata"; exit 1; }

echo -e "\e[35m
 █    ██  ██▓███  ▓█████▄  ▄▄▄     ▄▄▄█████▓▓█████ 
 ██  ▓██▒▓██░  ██▒▒██▀ ██▌▒████▄   ▓  ██▒ ▓▒▓█   ▀ 
▓██  ▒██░▓██░ ██▓▒░██   █▌▒██  ▀█▄ ▒ ▓██░ ▒░▒███   
▓▓█  ░██░▒██▄█▓▒ ▒░▓█▄   ▌░██▄▄▄▄██░ ▓██▓ ░ ▒▓█  ▄ 
▒▒█████▓ ▒██▒ ░  ░░▒████▓  ▓█   ▓██▒ ▒██▒ ░ ░▒████▒
░▒▓▒ ▒ ▒ ▒▓▒░ ░  ░ ▒▒▓  ▒  ▒▒   ▓▒█░ ▒ ░░   ░░ ▒░ ░
░░▒░ ░ ░ ░▒ ░      ░ ▒  ▒   ▒   ▒▒ ░   ░     ░ ░  ░
 ░░░ ░ ░ ░░        ░ ░  ░   ░   ▒    ░         ░   
   ░                 ░          ░  ░           ░  ░
                   ░                               
▓██   ██▓ ▄▄▄       ██▀███   ███▄    █             
 ▒██  ██▒▒████▄    ▓██ ▒ ██▒ ██ ▀█   █             
  ▒██ ██░▒██  ▀█▄  ▓██ ░▄█ ▒▓██  ▀█ ██▒            
  ░ ▐██▓░░██▄▄▄▄██ ▒██▀▀█▄  ▓██▒  ▐▌██▒            
  ░ ██▒▓░ ▓█   ▓██▒░██▓ ▒██▒▒██░   ▓██░            
   ██▒▒▒  ▒▒   ▓▒█░░ ▒▓ ░▒▓░░ ▒░   ▒ ▒             
 ▓██ ░▒░   ▒   ▒▒ ░  ░▒ ░ ▒░░ ░░   ░ ▒░            
 ▒ ▒ ░░    ░   ▒     ░░   ░    ░   ░ ░             
 ░ ░           ░  ░   ░              ░             
 ░ ░ \n\e[0m"

export PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true
echo -e "\033[35mYarn verrà aggiornato automaticamente. Attendere un momento prego.\n\033[0m"
if yarn install --no-bin-links; then
    echo -e "\033[35m\033[01mYarn è stato aggiornato correttamente.\n\033[0m"
else
    echo -e "\033[35mImpossibile installare yarn. Controlla la connessione internet e riprova.\033[0m"
    exit 1
fi

echo -e "\e[35m
 ██▓ ███▄    █   ██████ ▄▄▄█████▓ ▄▄▄       ██▓     ██▓    
▓██▒ ██ ▀█   █ ▒██    ▒ ▓  ██▒ ▓▒▒████▄    ▓██▒    ▓██▒    
▒██▒▓██  ▀█ ██▒░ ▓██▄   ▒ ▓██░ ▒░▒██  ▀█▄  ▒██░    ▒██░    
░██░▓██▒  ▐▌██▒  ▒   ██▒░ ▓██▓ ░ ░██▄▄▄▄██ ▒██░    ▒██░    
░██░▒██░   ▓██░▒██████▒▒  ▒██▒ ░  ▓█   ▓██▒░██████▒░██████▒
░▓  ░ ▒░   ▒ ▒ ▒ ▒▓▒ ▒ ░  ▒ ░░    ▒▒   ▓▒█░░ ▒░▓  ░░ ▒░▓  ░
 ▒ ░░ ░░   ░ ▒░░ ░▒  ░ ░    ░      ▒   ▒▒ ░░ ░ ▒  ░░ ░ ▒  ░
 ▒ ░   ░   ░ ░ ░  ░  ░    ░        ░   ▒     ░ ░     ░ ░   
 ░           ░       ░                 ░  ░    ░  ░    ░  ░
                                                           
 ███▄    █  ██▓███   ███▄ ▄███▓                            
 ██ ▀█   █ ▓██░  ██▒▓██▒▀█▀ ██▒                            
▓██  ▀█ ██▒▓██░ ██▓▒▓██    ▓██░                            
▓██▒  ▐▌██▒▒██▄█▓▒ ▒▒██    ▒██                             
▒██░   ▓██░▒██▒ ░  ░▒██▒   ░██▒                            
░ ▒░   ▒ ▒ ▒▓▒░ ░  ░░ ▒░   ░  ░                            
░ ░░   ░ ▒░░▒ ░     ░  ░      ░                            
   ░   ░ ░ ░░       ░      ░                               
         ░                 ░ \n\e[0m"

npm install -g prebuild-install
export TMPDIR=/data/data/com.termux/files/usr/tmp

echo -e "\033[35mNPM verrà installato automaticamente (compilazione Canvas). Attendere...\n\033[0m"
if npm install canvas puppeteer-core; then
    echo -e "\033[35m\033[01mNPM è stato installato correttamente.\n\033[0m"
else
    echo -e "\033[35mImpossibile installare NPM/Canvas. Controlla la connessione o gli errori di compilazione.\033[0m"
    exit 1
fi

pip install yt-dlp
clear

echo -e "\e[35m
                                          ███                                                  
                                         ░░░                                                   
  ███████ ████████   ██████    █████████ ████   ██████     ████████   ██████  ████████         
 ███░░███░░███░░███ ░░░░░███  ░█░░░░███ ░░███  ███░░███   ░░███░░███ ███░░███░░███░░███        
░███ ░███ ░███ ░░░   ███████  ░   ███░   ░███ ░███████     ░███ ░███░███████  ░███ ░░░         
░███ ░███ ░███      ███░░███    ███░   █ ░███ ░███░░░      ░███ ░███░███░░░   ░███             
░░███████ █████    ░░████████  █████████ █████░░██████     ░███████ ░░██████  █████            
 ░░░░░███░░░░░      ░░░░░░░░  ░░░░░░░░░ ░░░░░  ░░░░░░      ░███░░░   ░░░░░░  ░░░░░             
 ███ ░███                                                  ░███                                
░░██████                                                   █████                               
 ░░░░░░                                                   ░░░░░                                
                                                                       ████   █████            
                                                                      ░░███  ░░███             
  ██████   █████ █████  ██████  ████████      █████   ██████   ██████  ░███  ███████    ██████ 
 ░░░░░███ ░░███ ░░███  ███░░███░░███░░███    ███░░   ███░░███ ███░░███ ░███ ░░░███░    ███░░███
  ███████  ░███  ░███ ░███████  ░███ ░░░    ░░█████ ░███ ░░░ ░███████  ░███   ░███    ░███ ░███
 ███░░███  ░░███ ███  ░███░░░   ░███         ░░░░███░███  ███░███░░░   ░███   ░███ ███░███ ░███
░░████████  ░░█████   ░░██████  █████        ██████ ░░██████ ░░██████  █████  ░░█████ ░░██████ 
 ░░░░░░░░    ░░░░░     ░░░░░░  ░░░░░        ░░░░░░   ░░░░░░   ░░░░░░  ░░░░░    ░░░░░   ░░░░░░  
                                                                                               
                                                                                               
                                                                                               
                                          █████               █████                            
                                         ░░███               ░░███                             
 █████ █████  ██████   ████████   ██████  ░███████   ██████  ███████                           
░░███ ░░███  ░░░░░███ ░░███░░███ ███░░███ ░███░░███ ███░░███░░░███░                            
 ░███  ░███   ███████  ░███ ░░░ ░███████  ░███ ░███░███ ░███  ░███                             
 ░░███ ███   ███░░███  ░███     ░███░░░   ░███ ░███░███ ░███  ░███ ███                         
  ░░█████   ░░████████ █████    ░░██████  ████████ ░░██████   ░░█████                          
   ░░░░░     ░░░░░░░░ ░░░░░      ░░░░░░  ░░░░░░░░   ░░░░░░     ░░░░░  \n\e[0m"
echo -e "\e[35m
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣤⣶⣦⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣾⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣠⣤⣶⣾⣿⣿⣿⣿⣟⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠠⣶⣿⣿⡿⠿⠿⣿⣿⣿⣿⣿⣿⣿⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⣿⡇⠀⢀⣠⣴⣿⣿⠟⣿⣿⣿⣿⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠸⣿⣿⣤⣿⠟⢿⣿⠇⢀⣿⣿⡿⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⢻⣿⣿⠏⠀⠀⠁⢀⣼⡿⠋⠀⣀⣀⣠⣤⣀⡀⠀⠀⠀⠀⠀
⠀⣠⣶⡄⠀⠀⠀⠀⠉⠛⣀⣀⣤⣤⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣦⠀⠀⠀⠀
⣰⣿⣿⣧⣤⣶⣶⣾⣿⠿⠿⠛⠛⠉⠉⠉⠉⠁⣀⠿⠛⠻⠿⠿⠿⠛⠀⠀⠀⠀
⢻⣿⣿⡿⠛⠋⣉⠰⣶⡄⠀⢠⣴⣤⠀⠀⠛⢿⣿⣿⣦⡀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠻⣿⡗⢀⣼⣿⠀⣿⣿⡄⠈⢿⣿⡄⢰⣄⠀⠈⠻⠟⠃⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⣿⣿⡟⠀⠘⣿⣿⣦⣤⣀⣀⣸⣿⣦⣄⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠹⣿⠇⠀⠀⠈⠻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣶⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⣷⣦⡙⠛⠛⠿⠿⠿⠿⠛⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⢀⣿⣿⣿⡿⠀⠀⢀⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⢀⣾⣿⣟⣫⣤⣶⣾⣿⣿⣿⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⣠⣿⣿⣿⠿⠟⠋⣹⣿⣿⡿⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⡾⠛⢿⣿⣧⣄⣠⣾⣿⡿⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠈⣹⣿⣿⣿⣿⡁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⢀⣠⣾⣿⡿⠛⠻⢿⣿⣷⣤⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⢀⣠⣴⣿⣿⡿⠟⠀⠀⠀⠀⠙⠿⣿⣿⣷⣤⣄⡀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠛⠛⠛⠛⠉⠀⠀⠀⠀⠀⠀⠀⠀⠈⠻⣿⣿⣿⣿⣿⣶⣦⣤⣀⡀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠙⠿⠿⠿⣿⡿⠿⠿⠿⠛⠂ \n\e[0m"
   
echo -e "\033[35m\033[01mAvvio di VareBot!!\n\033[0m"
node .